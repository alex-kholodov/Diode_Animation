<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        circle {
            fill: blue;
        }
        rect.diode {
            fill: #CCC;
        }
        rect.pn{
            fill: #FFF;
        }
    </style>
    <script src="lib/jquery-3.3.1.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
<svg width="960" height="400" id="pn">
    <rect height="100" width="600" x="50" y="200" class="diode"></rect>
    <rect height="100" width="50" x="325" y="200" class="pn"></rect>
    <circle r="10" cx="398" cy="288.52879448162514"></circle>
</svg>
<br>
<label><input style="width:240px;" type="range" min="-10" max="10" step="any" value="0"> Voltage</label>
<script type="text/javascript">
    var delay = 40;
    var speed = 2;
    var min_x = 60;
    var max_x = 640;
    var min_y = 210;
    var max_y = 290;
    function move() {

        $('circle').each(function(){
            var cx = parseInt($(this).attr('cx'));
            cx = cx + speed;
            if(cx > max_x) {
                cx = 60;
            }
            $(this).attr('cx', cx);
        });
        setTimeout(move, delay);
    }
    $(function () {
        for (var i=0;i<30;i++){
            var random_x = Math.random() * (max_x - min_x) + min_x;
            var random_y = Math.random() * (max_y - min_y) + min_y;
            var circle = d3.select("svg").append("circle")
                .attr("r", "10")
                .attr("cx", random_x)
                .attr("cy", random_y);
        }
        move();
    });
</script>
</body>
</html>